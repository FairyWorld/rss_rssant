---
version: "1.9.1"
date: "2024-08-25"
title: "升级Serverless服务架构"
---

不知不觉三年过去了，蚁阅收录的订阅数量翻了几倍，服务器有点不堪重负，最近服务器快到期了，核算一下发现续费成本一年6000+，严重入不敷出。

于是我决定把服务迁移到云函数上（Serverless），降低成本同时减少服务器运维的复杂度，抽出一周时间改写代码并部署上线。这次没有迁移数据库，因为数据量大非常麻烦，后续会考虑迁移上云。

现在服务已经上线运行了一天，我重新核算了成本，主要成本是定期更新订阅，这个程序需要消耗大量CPU时间，云函数运行一天大约8块钱，一年差不多要3000元了。再加上数据库服务器和磁盘的费用，总的成本并没有明显减少 :(

暂且先这样吧，至少服务稳定很多了，代码也更好维护了。
